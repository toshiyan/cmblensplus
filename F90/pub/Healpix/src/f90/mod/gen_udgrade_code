#!/bin/sh
# script to generate SP and DP codes
# EH, Dec 2004 -- Jan 2005

SetDef(){
template_file=udgrade_template.f90
outfile_s=udgrade_s_inc.f90
outfile_d=udgrade_d_inc.f90
}

#--------

IncludeWarning(){
    echo '!*******************************************************************' >  $outfile
    echo '!                     DO NOT EDIT THIS FILE'                          >> $outfile
    echo "!Edit $template_file and run $script (or local Makefile) instead"     >> $outfile
    echo '!******************************************************************'  >> $outfile
}

#--------

Substitute(){

echo "--------------------------------------------"
echo "generating SP and DP routines for udgrade_nr"
echo "--------------------------------------------"

kind=SP
suffix=s
outfile=$outfile_s
IncludeWarning $outfile
cat $template_file |\
	sed "s|KMAP|$kind|" |\
	sed "s|KLOAD|$suffix|" >> $outfile
	
kind=DP
suffix=d
outfile=$outfile_d
IncludeWarning $outfile
cat $template_file |\
	sed "s|KMAP|$kind|" |\
	sed "s|KLOAD|$suffix|" >> $outfile
}	

#--------

script=$0
SetDef
Substitute

exit

